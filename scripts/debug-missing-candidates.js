/**\n * Debug script to identify missing candidates in the candidates page\n * This script will help identify why some candidates are not showing up\n */\n\nconsole.log('üîç DEBUGGING MISSING CANDIDATES ISSUE');\nconsole.log('');\n\n// Simulate the filterValidCandidates function\nfunction filterValidCandidates(candidates) {\n  const filtered = [];\n  const rejected = [];\n  \n  candidates.forEach(candidate => {\n    const isValid = \n      candidate.name &&\n      candidate.name.trim() !== '' &&\n      candidate.chestNumber &&\n      candidate.chestNumber.trim() !== '' &&\n      candidate.team &&\n      candidate.team.trim() !== '' &&\n      candidate.section &&\n      candidate.section.trim() !== '';\n    \n    if (isValid) {\n      filtered.push(candidate);\n    } else {\n      rejected.push({\n        candidate,\n        reasons: [\n          !candidate.name || candidate.name.trim() === '' ? 'Missing or empty name' : null,\n          !candidate.chestNumber || candidate.chestNumber.trim() === '' ? 'Missing or empty chestNumber' : null,\n          !candidate.team || candidate.team.trim() === '' ? 'Missing or empty team' : null,\n          !candidate.section || candidate.section.trim() === '' ? 'Missing or empty section' : null\n        ].filter(reason => reason !== null)\n      });\n    }\n  });\n  \n  return { filtered, rejected };\n}\n\n// Mock candidate data with various scenarios\nconst mockCandidatesData = [\n  // Valid candidates\n  {\n    _id: '1',\n    name: 'Ahmed Ali',\n    chestNumber: 'A001',\n    team: 'AQS',\n    section: 'senior'\n  },\n  {\n    _id: '2',\n    name: 'Fatima Hassan',\n    chestNumber: 'B001',\n    team: 'SMD',\n    section: 'junior'\n  },\n  \n  // Problematic candidates that would be filtered out\n  {\n    _id: '3',\n    name: '',  // Empty name\n    chestNumber: 'C001',\n    team: 'MQS',\n    section: 'senior'\n  },\n  {\n    _id: '4',\n    name: 'Omar Khalil',\n    chestNumber: '',  // Empty chest number\n    team: 'NUR',\n    section: 'junior'\n  },\n  {\n    _id: '5',\n    name: 'Sara Ahmed',\n    chestNumber: 'E001',\n    team: '',  // Empty team\n    section: 'sub-junior'\n  },\n  {\n    _id: '6',\n    name: 'Ali Hassan',\n    chestNumber: 'F001',\n    team: 'AQS',\n    section: ''  // Empty section\n  },\n  {\n    _id: '7',\n    name: '   ',  // Whitespace only name\n    chestNumber: 'G001',\n    team: 'SMD',\n    section: 'senior'\n  },\n  {\n    _id: '8',\n    // Missing name field entirely\n    chestNumber: 'H001',\n    team: 'MQS',\n    section: 'junior'\n  },\n  {\n    _id: '9',\n    name: 'Valid Candidate',\n    chestNumber: 'I001',\n    team: 'NUR',\n    section: 'general'\n  }\n];\n\nconsole.log('=== CANDIDATE FILTERING ANALYSIS ===');\nconsole.log('');\n\nconst { filtered, rejected } = filterValidCandidates(mockCandidatesData);\n\nconsole.log('üìä FILTERING RESULTS:');\nconsole.log('Total candidates received: ' + mockCandidatesData.length);\nconsole.log('Valid candidates: ' + filtered.length);\nconsole.log('Rejected candidates: ' + rejected.length);\nconsole.log('');\n\nif (filtered.length > 0) {\n  console.log('‚úÖ VALID CANDIDATES:');\n  filtered.forEach((candidate, index) => {\n    console.log((index + 1) + '. ' + candidate.name + ' (' + candidate.chestNumber + ') - Team ' + candidate.team + ' - ' + candidate.section);\n  });\n  console.log('');\n}\n\nif (rejected.length > 0) {\n  console.log('‚ùå REJECTED CANDIDATES:');\n  rejected.forEach((item, index) => {\n    const candidate = item.candidate;\n    console.log((index + 1) + '. Candidate ID: ' + (candidate._id || 'Unknown'));\n    console.log('   Name: \"' + (candidate.name || '[MISSING]') + '\"');\n    console.log('   Chest Number: \"' + (candidate.chestNumber || '[MISSING]') + '\"');\n    console.log('   Team: \"' + (candidate.team || '[MISSING]') + '\"');\n    console.log('   Section: \"' + (candidate.section || '[MISSING]') + '\"');\n    console.log('   Rejection Reasons: ' + item.reasons.join(', '));\n    console.log('');\n  });\n}\n\nconsole.log('=== COMMON CAUSES OF MISSING CANDIDATES ===');\nconsole.log('');\n\nconsole.log('üîç POSSIBLE REASONS FOR MISSING CANDIDATES:');\nconsole.log('');\n\nconsole.log('1. EMPTY OR MISSING FIELDS:');\nconsole.log('   - Name field is empty, null, or contains only whitespace');\nconsole.log('   - Chest number is empty, null, or contains only whitespace');\nconsole.log('   - Team field is empty, null, or contains only whitespace');\nconsole.log('   - Section field is empty, null, or contains only whitespace');\nconsole.log('');\n\nconsole.log('2. DATA ENTRY ISSUES:');\nconsole.log('   - Incomplete candidate registration by team admins');\nconsole.log('   - Accidental deletion of required fields');\nconsole.log('   - Copy-paste errors leaving empty fields');\nconsole.log('   - Form validation not working properly during registration');\nconsole.log('');\n\nconsole.log('3. DATABASE ISSUES:');\nconsole.log('   - Null values in database fields');\nconsole.log('   - Data migration issues');\nconsole.log('   - Database corruption or incomplete saves');\nconsole.log('   - API response missing required fields');\nconsole.log('');\n\nconsole.log('4. TEAM CODE MISMATCHES:');\nconsole.log('   - Team codes that don\\'t match existing teams');\nconsole.log('   - Case sensitivity issues (e.g., \"aqs\" vs \"AQS\")');\nconsole.log('   - Typos in team codes');\nconsole.log('');\n\nconsole.log('=== SOLUTIONS TO FIX MISSING CANDIDATES ===');\nconsole.log('');\n\nconsole.log('üõ†Ô∏è  IMMEDIATE FIXES:');\nconsole.log('');\n\nconsole.log('1. RELAX FILTERING CRITERIA:');\nconsole.log('   - Allow candidates with missing non-critical fields');\nconsole.log('   - Show candidates with warnings instead of hiding them');\nconsole.log('   - Implement progressive validation');\nconsole.log('');\n\nconsole.log('2. ENHANCED VALIDATION:');\nconsole.log('   - Add data validation during candidate creation');\nconsole.log('   - Implement required field checks in forms');\nconsole.log('   - Add client-side validation before submission');\nconsole.log('');\n\nconsole.log('3. IMPROVED ERROR HANDLING:');\nconsole.log('   - Log rejected candidates for admin review');\nconsole.log('   - Show warnings for incomplete candidate data');\nconsole.log('   - Provide data cleanup tools for admins');\nconsole.log('');\n\nconsole.log('4. DATA CLEANUP:');\nconsole.log('   - Review database for incomplete records');\nconsole.log('   - Fix missing or empty fields');\nconsole.log('   - Standardize team codes and sections');\nconsole.log('');\n\nconsole.log('=== RECOMMENDED FILTER IMPROVEMENTS ===');\nconsole.log('');\n\nconsole.log('üîß IMPROVED FILTERING LOGIC:');\nconsole.log('');\n\nconsole.log('// More lenient filtering with warnings');\nconsole.log('const filterValidCandidates = (candidates) => {');\nconsole.log('  return candidates.filter(candidate => {');\nconsole.log('    // Only filter out completely empty records');\nconsole.log('    return candidate._id && (');\nconsole.log('      candidate.name?.trim() ||');\nconsole.log('      candidate.chestNumber?.trim() ||');\nconsole.log('      candidate.team?.trim()');\nconsole.log('    );');\nconsole.log('  });');\nconsole.log('};');\nconsole.log('');\n\nconsole.log('// Add validation warnings');\nconsole.log('const validateCandidate = (candidate) => {');\nconsole.log('  const warnings = [];');\nconsole.log('  if (!candidate.name?.trim()) warnings.push(\"Missing name\");');\nconsole.log('  if (!candidate.chestNumber?.trim()) warnings.push(\"Missing chest number\");');\nconsole.log('  if (!candidate.team?.trim()) warnings.push(\"Missing team\");');\nconsole.log('  if (!candidate.section?.trim()) warnings.push(\"Missing section\");');\nconsole.log('  return warnings;');\nconsole.log('};');\nconsole.log('');\n\nconsole.log('=== DEBUGGING STEPS FOR ADMINS ===');\nconsole.log('');\n\nconsole.log('üìã TO IDENTIFY MISSING CANDIDATES:');\nconsole.log('');\n\nconsole.log('1. Check the browser console for filtering logs');\nconsole.log('2. Compare candidate count in database vs displayed count');\nconsole.log('3. Review team statistics for unexpected low numbers');\nconsole.log('4. Check individual team candidate lists');\nconsole.log('5. Verify API responses include all expected candidates');\nconsole.log('');\n\nconsole.log('üîç INVESTIGATION CHECKLIST:');\nconsole.log('‚ñ° Are all required fields populated in the database?');\nconsole.log('‚ñ° Do team codes match exactly (case-sensitive)?');\nconsole.log('‚ñ° Are there any null or undefined values?');\nconsole.log('‚ñ° Is the API returning all candidates?');\nconsole.log('‚ñ° Are there any JavaScript errors in the console?');\nconsole.log('‚ñ° Is the filtering logic too strict?');\nconsole.log('');\n\nconsole.log('‚úÖ Debug analysis completed!');\nconsole.log('');\nconsole.log('RECOMMENDATION: Review the filterValidCandidates function');\nconsole.log('and consider making it less strict to avoid hiding candidates');\nconsole.log('with minor data issues.');"