# Candidates Overview Collapsible Enhancement\n\n## Overview\nSuccessfully added collapsible dropdown functionality to the candidates overview section, allowing users to view detailed programme information for each candidate directly in the overview table.\n\n## Changes Made\n\n### 1. **Enhanced Data Structure**\nUpdated the `CandidateWithStats` interface to include programme details in the `calculateCandidateStats` function:\n\n```typescript\nregisteredProgrammes: {\n  artsStage: {\n    // ... existing counts\n    programmes: Array<{\n      id: string;\n      name: string;\n      code: string;\n      positionType: string;\n      section: string;\n    }>;\n  };\n  // ... similar for artsNonStage and sports\n};\n```\n\n### 2. **Collapsible State Management**\n- **Added State**: `expandedCandidates` Set to track which candidates are expanded\n- **Toggle Function**: `toggleCandidateExpanded()` to manage expand/collapse state\n- **Persistent State**: Maintains expanded state during interactions\n\n### 3. **Enhanced Overview Table Structure**\n- **Expand/Collapse Button**: Arrow icon next to chest number in first column\n- **Main Row**: Shows candidate summary with programme counts\n- **Collapsible Row**: Hidden by default, shows detailed programme information when expanded\n- **Full Width**: Collapsible row spans all 7 columns of the table\n\n### 4. **Programme Details Display**\nEach expanded section shows:\n- **Categorized Programmes**: Organized by Arts Stage, Arts Non-Stage, and Sports\n- **Programme Cards**: Individual cards for each registered programme\n- **Programme Information**: Name, code, position type, section\n- **Category Headers**: Clear section headers with programme counts\n- **Color Coding**: Category-specific color schemes\n\n## UI Components\n\n### Overview Table Structure\n```\n| Chest # | Name | Team | Section | Registered Programmes | Earned Points | Status |\n|---------|------|------|---------|----------------------|---------------|--------|\n| â–¶ï¸ A001 | Ahmed| AQS  | Senior  | ğŸ­3 ğŸ“2 ğŸƒ3 Total:8  | 35 points     | Active |\n```\n\n### Expanded View\n```\n| Chest # | Name | Team | Section | Registered Programmes | Earned Points | Status |\n|---------|------|------|---------|----------------------|---------------|--------|\n| ğŸ”½ A001 | Ahmed| AQS  | Senior  | ğŸ­3 ğŸ“2 ğŸƒ3 Total:8  | 35 points     | Active |\n|         ğŸ“‹ Registered Programmes (8)                                          |\n|         ğŸ­ Arts Stage (3 programmes)                                          |\n|         [Classical Dance] [Folk Dance] [Drama]                                |\n|         ğŸ“ Arts Non-Stage (2 programmes)                                      |\n|         [Essay Writing] [Calligraphy]                                         |\n|         ğŸƒ Sports (3 programmes)                                              |\n|         [Athletics 100m] [Football] [Basketball]                              |\n```\n\n### Programme Cards\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Classical Dance            [Ind]â”‚\nâ”‚ Code: CD001                     â”‚\nâ”‚ Section: Senior      ğŸ­ Stage   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Card Elements:**\n- **Programme Name**: Primary heading\n- **Programme Code**: Secondary identifier\n- **Position Type Badge**: Individual/Group/General\n- **Section Information**: Programme section\n- **Category Badge**: Arts Stage/Non-Stage/Sports\n\n### Color Schemes\n- **ğŸ­ Arts Stage**: Pink color scheme (`bg-pink-50`, `border-pink-200`)\n- **ğŸ“ Arts Non-Stage**: Purple color scheme (`bg-purple-50`, `border-purple-200`)\n- **ğŸƒ Sports**: Blue color scheme (`bg-blue-50`, `border-blue-200`)\n\n## Functionality Details\n\n### Collapsible Behavior\n1. **Default State**: All candidates collapsed, showing only summary\n2. **Click to Expand**: Click arrow button next to chest number to reveal programme details\n3. **Programme Display**: Shows all registered programmes organized by category\n4. **Click to Collapse**: Click arrow button again to hide details\n5. **State Persistence**: Expanded state maintained during filtering and interactions\n\n### Programme Information Display\n- **Programme Name**: Full programme title\n- **Programme Code**: Unique identifier for each programme\n- **Position Type**: Individual, Group, or General with color-coded badges\n- **Section**: Programme section (Senior, Junior, Sub-Junior, General)\n- **Category Organization**: Programmes grouped by Arts Stage, Arts Non-Stage, Sports\n\n### Responsive Design\n- **Mobile**: Single column programme cards\n- **Tablet**: Two column layout\n- **Desktop**: Three column layout for optimal space usage\n- **Adaptive**: Cards resize based on content and screen size\n\n## User Experience Benefits\n\n### Enhanced Information Access\n- **Comprehensive View**: All candidates visible in single overview table\n- **On-Demand Details**: View programme information only when needed\n- **Clean Interface**: Uncluttered default view with expandable details\n- **Quick Overview**: See programme counts at a glance\n- **Detailed Analysis**: Access complete programme information when required\n\n### Improved Navigation\n- **Single Page Access**: No need to navigate between tabs for basic information\n- **Intuitive Interaction**: Familiar expand/collapse pattern\n- **Visual Feedback**: Clear indicators for expanded/collapsed state\n- **Smooth Transitions**: Animated expand/collapse for better UX\n- **Consistent Behavior**: Same interaction pattern as category tabs\n\n### Administrative Efficiency\n- **Quick Verification**: Easily verify candidate registrations\n- **Programme Oversight**: Monitor programme participation patterns\n- **Conflict Detection**: Identify potential scheduling conflicts\n- **Resource Planning**: Better understanding of programme demand\n- **Team Filtering**: Filter by team while maintaining collapsible functionality\n\n## Technical Implementation\n\n### State Management\n```typescript\nconst [expandedCandidates, setExpandedCandidates] = useState<Set<string>>(new Set());\n\nconst toggleCandidateExpanded = (candidateId: string) => {\n  const newExpanded = new Set(expandedCandidates);\n  if (newExpanded.has(candidateId)) {\n    newExpanded.delete(candidateId);\n  } else {\n    newExpanded.add(candidateId);\n  }\n  setExpandedCandidates(newExpanded);\n};\n```\n\n### Data Processing\n- **Programme Collection**: Enhanced `calculateCandidateStats` to gather programme details\n- **Category Separation**: Organizes programmes by category and subcategory\n- **Efficient Storage**: Stores programme information with candidate data\n- **Real-time Updates**: Reflects changes in programme registrations\n\n### Performance Optimization\n- **Conditional Rendering**: Only renders expanded content when needed\n- **Efficient State**: Uses Set for O(1) lookup performance\n- **Minimal Re-renders**: Optimized state updates\n- **Lazy Loading**: Programme details loaded only when expanded\n\n## Example Usage Scenarios\n\n### Scenario 1: Quick Registration Check\n1. Administrator opens candidates overview\n2. Sees all candidates with programme count summaries\n3. Clicks expand button for specific candidate\n4. Reviews detailed programme registrations\n5. Verifies registration accuracy without leaving the page\n\n### Scenario 2: Team Performance Analysis\n1. Administrator filters by specific team\n2. Expands multiple candidates to compare programmes\n3. Analyzes team's programme distribution\n4. Identifies strengths and participation patterns\n\n### Scenario 3: Programme Conflict Detection\n1. Administrator notices candidate with high programme count\n2. Expands details to see specific programmes\n3. Reviews programme schedules and timing\n4. Identifies potential conflicts across categories\n\n## Integration with Existing Features\n\n### Team Filtering\n- **Maintained Functionality**: Team filter works with collapsible rows\n- **State Preservation**: Expanded state maintained during filtering\n- **Dynamic Counts**: Filter dropdown shows candidate counts per team\n\n### Category Tabs\n- **Complementary Feature**: Overview provides general view, tabs provide category-specific analysis\n- **Consistent UI**: Same collapsible pattern used in both overview and category tabs\n- **Shared State**: Same `expandedCandidates` state used across components\n\n## Files Modified\n- `src/app/admin/candidates/page.tsx` - Enhanced overview section with collapsible functionality\n\n## Impact\n- **Enhanced Visibility**: Complete programme information accessible in overview\n- **Improved UX**: Clean, intuitive interface with detailed information on demand\n- **Better Administration**: Easier verification and monitoring without page navigation\n- **Strategic Value**: Better insights into candidate registrations and programme participation patterns\n- **Unified Experience**: Consistent collapsible functionality across overview and category sections"